"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/api/chat/route",{

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n/* harmony import */ var _config_prompts__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/config/prompts */ \"(rsc)/./src/config/prompts.ts\");\n\n\nconst runtime = \"edge\";\nasync function POST(req) {\n    try {\n        const { messages, promptType = \"default\" } = await req.json();\n        // 调用 DeepSeek API\n        const response = await fetch(\"https://api.deepseek.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${process.env.DEEPSEEK_API_KEY}`\n            },\n            body: JSON.stringify({\n                model: \"deepseek-chat\",\n                messages: [\n                    {\n                        role: \"system\",\n                        content: _config_prompts__WEBPACK_IMPORTED_MODULE_1__.SYSTEM_PROMPTS[promptType]\n                    },\n                    ...messages\n                ],\n                temperature: 0.7,\n                max_tokens: 1000\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"API错误:\", response.status, errorText);\n            throw new Error(`API错误: ${response.status} ${errorText}`);\n        }\n        const data = await response.json();\n        console.log(\"API响应摘要:\", data.choices?.[0]?.message);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: data.choices[0].message.content\n        });\n    } catch (error) {\n        console.error(\"错误:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"请求处理失败\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUEyQztBQUN3QjtBQUU1RCxNQUFNRSxVQUFVLE9BQU87QUFFdkIsZUFBZUMsS0FBS0MsR0FBWTtJQUNyQyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLGFBQWEsU0FBUyxFQUFFLEdBQUcsTUFBTUYsSUFBSUcsSUFBSTtRQUUzRCxrQkFBa0I7UUFDbEIsTUFBTUMsV0FBVyxNQUFNQyxNQUFNLGdEQUFnRDtZQUMzRUMsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsaUJBQWlCLENBQUMsT0FBTyxFQUFFQyxRQUFRQyxHQUFHLENBQUNDLGdCQUFnQixDQUFDLENBQUM7WUFDM0Q7WUFDQUMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNuQkMsT0FBTztnQkFDUGIsVUFBVTtvQkFDUjt3QkFBRWMsTUFBTTt3QkFBVUMsU0FBU25CLDJEQUFjLENBQUNLLFdBQThCO29CQUFDO3VCQUN0RUQ7aUJBQ0o7Z0JBQ0RnQixhQUFhO2dCQUNiQyxZQUFZO1lBQ2Q7UUFDRjtRQUVBLElBQUksQ0FBQ2QsU0FBU2UsRUFBRSxFQUFFO1lBQ2hCLE1BQU1DLFlBQVksTUFBTWhCLFNBQVNpQixJQUFJO1lBQ3JDQyxRQUFRQyxLQUFLLENBQUMsVUFBVW5CLFNBQVNvQixNQUFNLEVBQUVKO1lBQ3pDLE1BQU0sSUFBSUssTUFBTSxDQUFDLE9BQU8sRUFBRXJCLFNBQVNvQixNQUFNLENBQUMsQ0FBQyxFQUFFSixVQUFVLENBQUM7UUFDMUQ7UUFFQSxNQUFNTSxPQUFPLE1BQU10QixTQUFTRCxJQUFJO1FBQ2hDbUIsUUFBUUssR0FBRyxDQUFDLFlBQVlELEtBQUtFLE9BQU8sRUFBRSxDQUFDLEVBQUUsRUFBRUM7UUFFM0MsT0FBT2pDLGtGQUFZQSxDQUFDTyxJQUFJLENBQUM7WUFDdkIwQixTQUFTSCxLQUFLRSxPQUFPLENBQUMsRUFBRSxDQUFDQyxPQUFPLENBQUNiLE9BQU87UUFDMUM7SUFDRixFQUFFLE9BQU9PLE9BQVk7UUFDbkJELFFBQVFDLEtBQUssQ0FBQyxPQUFPQTtRQUNyQixPQUFPM0Isa0ZBQVlBLENBQUNPLElBQUksQ0FDdEI7WUFBRW9CLE9BQU87WUFBVU8sU0FBU1AsTUFBTU0sT0FBTztRQUFDLEdBQzFDO1lBQUVMLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL2FwcC9hcGkvY2hhdC9yb3V0ZS50cz9kZTQ2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcbmltcG9ydCB7IFNZU1RFTV9QUk9NUFRTLCBTeXN0ZW1Qcm9tcHRLZXkgfSBmcm9tICdAL2NvbmZpZy9wcm9tcHRzJztcblxuZXhwb3J0IGNvbnN0IHJ1bnRpbWUgPSAnZWRnZSc7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcTogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgbWVzc2FnZXMsIHByb21wdFR5cGUgPSAnZGVmYXVsdCcgfSA9IGF3YWl0IHJlcS5qc29uKCk7XG4gICAgXG4gICAgLy8g6LCD55SoIERlZXBTZWVrIEFQSVxuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goJ2h0dHBzOi8vYXBpLmRlZXBzZWVrLmNvbS92MS9jaGF0L2NvbXBsZXRpb25zJywge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3Byb2Nlc3MuZW52LkRFRVBTRUVLX0FQSV9LRVl9YFxuICAgICAgfSxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbW9kZWw6IFwiZGVlcHNlZWstY2hhdFwiLFxuICAgICAgICBtZXNzYWdlczogW1xuICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IFNZU1RFTV9QUk9NUFRTW3Byb21wdFR5cGUgYXMgU3lzdGVtUHJvbXB0S2V5XSB9LFxuICAgICAgICAgIC4uLm1lc3NhZ2VzXG4gICAgICAgIF0sXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgIG1heF90b2tlbnM6IDEwMDBcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICBjb25zb2xlLmVycm9yKCdBUEnplJnor686JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEnplJnor686ICR7cmVzcG9uc2Uuc3RhdHVzfSAke2Vycm9yVGV4dH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKCdBUEnlk43lupTmkZjopoE6JywgZGF0YS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2UpO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBtZXNzYWdlOiBkYXRhLmNob2ljZXNbMF0ubWVzc2FnZS5jb250ZW50XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCfplJnor686JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICfor7fmsYLlpITnkIblpLHotKUnLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJTWVNURU1fUFJPTVBUUyIsInJ1bnRpbWUiLCJQT1NUIiwicmVxIiwibWVzc2FnZXMiLCJwcm9tcHRUeXBlIiwianNvbiIsInJlc3BvbnNlIiwiZmV0Y2giLCJtZXRob2QiLCJoZWFkZXJzIiwicHJvY2VzcyIsImVudiIsIkRFRVBTRUVLX0FQSV9LRVkiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsIm1vZGVsIiwicm9sZSIsImNvbnRlbnQiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJjb25zb2xlIiwiZXJyb3IiLCJzdGF0dXMiLCJFcnJvciIsImRhdGEiLCJsb2ciLCJjaG9pY2VzIiwibWVzc2FnZSIsImRldGFpbHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ })

});