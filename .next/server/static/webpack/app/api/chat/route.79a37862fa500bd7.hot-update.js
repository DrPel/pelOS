"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/api/chat/route",{

/***/ "(rsc)/./app/api/chat/route.ts":
/*!*******************************!*\
  !*** ./app/api/chat/route.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   runtime: () => (/* binding */ runtime)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/web/exports/next-response */ \"(rsc)/./node_modules/next/dist/esm/server/web/exports/next-response.js\");\n\nconst runtime = \"edge\";\nasync function POST(req) {\n    try {\n        const { messages } = await req.json();\n        // 获取用户消息\n        const userMessage = messages[0].content;\n        console.log(\"用户消息:\", userMessage);\n        // 调用 AiHubMix API\n        const response = await fetch(\"https://aihubmix.com/v1/chat/completions\", {\n            method: \"POST\",\n            headers: {\n                \"Content-Type\": \"application/json\",\n                \"Authorization\": `Bearer ${process.env.ANTHROPIC_API_KEY}`\n            },\n            body: JSON.stringify({\n                model: \"aihubmix-DeepSeek-R1\",\n                messages: messages,\n                temperature: 0.7,\n                max_tokens: 1000\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text();\n            console.error(\"API错误:\", response.status, errorText);\n            throw new Error(`API错误: ${response.status} ${errorText}`);\n        }\n        const data = await response.json();\n        console.log(\"API响应摘要:\", data.choices?.[0]?.message);\n        // 获取原始消息内容\n        let content = data.choices[0].message.content;\n        // 移除所有 <think>...</think> 标签内容\n        content = content.replace(/<think>[\\s\\S]*?<\\/think>/g, \"\");\n        // 移除可能残留的空行\n        content = content.replace(/\\n\\s*\\n/g, \"\\n\").trim();\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            message: content\n        });\n    } catch (error) {\n        console.error(\"错误:\", error);\n        return next_dist_server_web_exports_next_response__WEBPACK_IMPORTED_MODULE_0__[\"default\"].json({\n            error: \"请求处理失败\",\n            details: error.message\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL2NoYXQvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTJDO0FBRXBDLE1BQU1DLFVBQVUsT0FBTztBQUV2QixlQUFlQyxLQUFLQyxHQUFZO0lBQ3JDLElBQUk7UUFDRixNQUFNLEVBQUVDLFFBQVEsRUFBRSxHQUFHLE1BQU1ELElBQUlFLElBQUk7UUFFbkMsU0FBUztRQUNULE1BQU1DLGNBQWNGLFFBQVEsQ0FBQyxFQUFFLENBQUNHLE9BQU87UUFDdkNDLFFBQVFDLEdBQUcsQ0FBQyxTQUFTSDtRQUVyQixrQkFBa0I7UUFDbEIsTUFBTUksV0FBVyxNQUFNQyxNQUFNLDRDQUE0QztZQUN2RUMsUUFBUTtZQUNSQyxTQUFTO2dCQUNQLGdCQUFnQjtnQkFDaEIsaUJBQWlCLENBQUMsT0FBTyxFQUFFQyxRQUFRQyxHQUFHLENBQUNDLGlCQUFpQixDQUFDLENBQUM7WUFDNUQ7WUFDQUMsTUFBTUMsS0FBS0MsU0FBUyxDQUFDO2dCQUNuQkMsT0FBTztnQkFDUGhCLFVBQVVBO2dCQUNWaUIsYUFBYTtnQkFDYkMsWUFBWTtZQUNkO1FBQ0Y7UUFFQSxJQUFJLENBQUNaLFNBQVNhLEVBQUUsRUFBRTtZQUNoQixNQUFNQyxZQUFZLE1BQU1kLFNBQVNlLElBQUk7WUFDckNqQixRQUFRa0IsS0FBSyxDQUFDLFVBQVVoQixTQUFTaUIsTUFBTSxFQUFFSDtZQUN6QyxNQUFNLElBQUlJLE1BQU0sQ0FBQyxPQUFPLEVBQUVsQixTQUFTaUIsTUFBTSxDQUFDLENBQUMsRUFBRUgsVUFBVSxDQUFDO1FBQzFEO1FBRUEsTUFBTUssT0FBTyxNQUFNbkIsU0FBU0wsSUFBSTtRQUNoQ0csUUFBUUMsR0FBRyxDQUFDLFlBQVlvQixLQUFLQyxPQUFPLEVBQUUsQ0FBQyxFQUFFLEVBQUVDO1FBRTNDLFdBQVc7UUFDWCxJQUFJeEIsVUFBVXNCLEtBQUtDLE9BQU8sQ0FBQyxFQUFFLENBQUNDLE9BQU8sQ0FBQ3hCLE9BQU87UUFFN0MsK0JBQStCO1FBQy9CQSxVQUFVQSxRQUFReUIsT0FBTyxDQUFDLDZCQUE2QjtRQUN2RCxZQUFZO1FBQ1p6QixVQUFVQSxRQUFReUIsT0FBTyxDQUFDLFlBQVksTUFBTUMsSUFBSTtRQUVoRCxPQUFPakMsa0ZBQVlBLENBQUNLLElBQUksQ0FBQztZQUN2QjBCLFNBQVN4QjtRQUNYO0lBQ0YsRUFBRSxPQUFPbUIsT0FBWTtRQUNuQmxCLFFBQVFrQixLQUFLLENBQUMsT0FBT0E7UUFDckIsT0FBTzFCLGtGQUFZQSxDQUFDSyxJQUFJLENBQ3RCO1lBQUVxQixPQUFPO1lBQVVRLFNBQVNSLE1BQU1LLE9BQU87UUFBQyxHQUMxQztZQUFFSixRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL19OX0UvLi9hcHAvYXBpL2NoYXQvcm91dGUudHM/ZGU0NiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5cbmV4cG9ydCBjb25zdCBydW50aW1lID0gJ2VkZ2UnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gUE9TVChyZXE6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IG1lc3NhZ2VzIH0gPSBhd2FpdCByZXEuanNvbigpO1xuICAgIFxuICAgIC8vIOiOt+WPlueUqOaIt+a2iOaBr1xuICAgIGNvbnN0IHVzZXJNZXNzYWdlID0gbWVzc2FnZXNbMF0uY29udGVudDtcbiAgICBjb25zb2xlLmxvZygn55So5oi35raI5oGvOicsIHVzZXJNZXNzYWdlKTtcbiAgICBcbiAgICAvLyDosIPnlKggQWlIdWJNaXggQVBJXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCgnaHR0cHM6Ly9haWh1Ym1peC5jb20vdjEvY2hhdC9jb21wbGV0aW9ucycsIHtcbiAgICAgIG1ldGhvZDogJ1BPU1QnLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHtwcm9jZXNzLmVudi5BTlRIUk9QSUNfQVBJX0tFWX1gXG4gICAgICB9LFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xuICAgICAgICBtb2RlbDogXCJhaWh1Ym1peC1EZWVwU2Vlay1SMVwiLFxuICAgICAgICBtZXNzYWdlczogbWVzc2FnZXMsXG4gICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXG4gICAgICAgIG1heF90b2tlbnM6IDEwMDBcbiAgICAgIH0pXG4gICAgfSk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBjb25zdCBlcnJvclRleHQgPSBhd2FpdCByZXNwb25zZS50ZXh0KCk7XG4gICAgICBjb25zb2xlLmVycm9yKCdBUEnplJnor686JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEnplJnor686ICR7cmVzcG9uc2Uuc3RhdHVzfSAke2Vycm9yVGV4dH1gKTtcbiAgICB9XG5cbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuICAgIGNvbnNvbGUubG9nKCdBUEnlk43lupTmkZjopoE6JywgZGF0YS5jaG9pY2VzPy5bMF0/Lm1lc3NhZ2UpO1xuICAgIFxuICAgIC8vIOiOt+WPluWOn+Wni+a2iOaBr+WGheWuuVxuICAgIGxldCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdLm1lc3NhZ2UuY29udGVudDtcbiAgICBcbiAgICAvLyDnp7vpmaTmiYDmnIkgPHRoaW5rPi4uLjwvdGhpbms+IOagh+etvuWGheWuuVxuICAgIGNvbnRlbnQgPSBjb250ZW50LnJlcGxhY2UoLzx0aGluaz5bXFxzXFxTXSo/PFxcL3RoaW5rPi9nLCAnJyk7XG4gICAgLy8g56e76Zmk5Y+v6IO95q6L55WZ55qE56m66KGMXG4gICAgY29udGVudCA9IGNvbnRlbnQucmVwbGFjZSgvXFxuXFxzKlxcbi9nLCAnXFxuJykudHJpbSgpO1xuICAgIFxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7XG4gICAgICBtZXNzYWdlOiBjb250ZW50XG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcbiAgICBjb25zb2xlLmVycm9yKCfplJnor686JywgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHsgZXJyb3I6ICfor7fmsYLlpITnkIblpLHotKUnLCBkZXRhaWxzOiBlcnJvci5tZXNzYWdlIH0sXG4gICAgICB7IHN0YXR1czogNTAwIH1cbiAgICApO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJydW50aW1lIiwiUE9TVCIsInJlcSIsIm1lc3NhZ2VzIiwianNvbiIsInVzZXJNZXNzYWdlIiwiY29udGVudCIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsImZldGNoIiwibWV0aG9kIiwiaGVhZGVycyIsInByb2Nlc3MiLCJlbnYiLCJBTlRIUk9QSUNfQVBJX0tFWSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwibW9kZWwiLCJ0ZW1wZXJhdHVyZSIsIm1heF90b2tlbnMiLCJvayIsImVycm9yVGV4dCIsInRleHQiLCJlcnJvciIsInN0YXR1cyIsIkVycm9yIiwiZGF0YSIsImNob2ljZXMiLCJtZXNzYWdlIiwicmVwbGFjZSIsInRyaW0iLCJkZXRhaWxzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/chat/route.ts\n");

/***/ })

});